(function(d,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("react/jsx-runtime"),require("react"),require("lodash")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react","lodash"],l):(d=typeof globalThis<"u"?globalThis:d||self,l(d.wordclock={},d.jsxRuntime,d.React,d.lodash))})(this,function(d,l,h,b){"use strict";function B(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const p=B(h),M=(e=new Date)=>{const t=e.getDay();let r=t-1;for(;r<0;)r+=7;const i=e.getDate(),n=e.getMonth(),s=e.getHours()%12,o=e.getHours(),a=e.getMinutes(),u=e.getSeconds();return{day:t,daystartingmonday:r,date:i,month:n,hour:s,twentyfourhour:o,minute:a,second:u}},F=()=>{const[e,t]=h.useState(M());return h.useEffect(()=>{const r=setInterval(()=>{t(M())},1e3);return()=>clearInterval(r)},[]),e},N=({groups:e})=>{const t=[],r=[];return e.forEach(i=>{const n=[],s=[];i.forEach(o=>{const a=o.type;if(a==="item")o.items.forEach(c=>{const f=c.highlight,_=c.text||"";n.push(_),s.push(f)});else if(a==="sequence"){const u=o.bind,c=o.first;o.text.forEach((_,w)=>{const ve=`${u}==${c+w}`;n.push(_),s.push(ve)})}else if(a==="space"){const u=o.count;for(let c=0;c<u;c++)n.push(""),s.push("")}}),r.push(s),t.push(n)}),{logic:r,label:t}},y={container:"_container_1nb32_1 word-clock",words:"_words_1nb32_7 words",word:"_word_1nb32_7 word",wordHighlighted:"_wordHighlighted_1nb32_26 _word_1nb32_7 word word-highlighted"},T="!%&*()-+=|/<>",W=e=>/^-?\d+$/.test(e),q=e=>{if(!b.isString(e))return"";let t,r,i,n,s,o,a;for(s=e.indexOf("("),o=1+s,t=e.substr(0,s),n=1;n>0&&o<e.length;)a=e.substr(o,1),a==="("&&n++,a===")"&&n--,o++;return o<e.length?r=e.substr(o):r="",i=e.substr(1+s,o-1-(1+s)),[t,i,r]},S=({source:e,array:t}={})=>{if(!b.isString(e)||!b.isArray(t))return-1;for(let r=0;r<t.length;r++)if(e.indexOf(t[r])!==-1)return r;return-1},x=({source:e,pivot:t})=>{let r,i,n,s,o,a,u,c;const f=e.indexOf(t);for(n=e.substr(0,f),s=e.substr(f+t.length),r="",c=n.length-1,u=n.substr(c,1);c>0&&T.indexOf(u)===-1;)c--,u=n.substr(c,1);if(T.indexOf(u)!==-1?(r=n.substr(c+1),o=n.substr(0,c+1)):(r=n.substr(c),o=n.substr(0,c)),i="",s.length>0)for(c=0,u=s.substr(c,1);c<s.length&&T.indexOf(u)===-1;)c++,c<s.length&&(u=s.substr(c,1));return c<s.length?(i=s.substr(0,c),a=s.substr(c)):(i=s,a=""),[o,r,i,a]},k=({source:e,instance:t}={})=>!b.isString(e)||!b.isString(t)?!1:e.indexOf(t)!==-1,I=e=>k({source:e,instance:"("})||k({source:e,instance:")"}),v={EQUALITY:["===","!==","==","!=",">=","<=",">","<"],MATH:["%","*","/","+","-"],BOOLEAN:["&&","||"],CONVERSION:["-","!"]},L=(e,t)=>{let r,i=!1,n;for(i=!0;i;)if(I(e)){r=q(e);const s=L(r[1],t);e=`${r[0]}${s}${r[2]}`}else if(n=S({source:e,array:v.MATH}),n!==-1){r=x({source:e,pivot:v.MATH[n]});const s=z({termOne:r[1],termTwo:r[2],operator:v.MATH[n],props:t});e=`${r[0]}${s}${r[3]}`}else if(n=S({source:e,array:v.EQUALITY}),n!==-1){r=x({source:e,pivot:v.EQUALITY[n]});const s=z({termOne:r[1],termTwo:r[2],operator:v.EQUALITY[n],props:t});e=`${r[0]}${s}${r[3]}`}else if(n=S({source:e,array:v.BOOLEAN}),n!==-1){r=x({source:e,pivot:v.BOOLEAN[n]});const s=z({termOne:r[1],termTwo:r[2],operator:v.BOOLEAN[n],props:t});e=`${r[0]}${s}${r[3]}`}else i=!1;return g(e,t)},g=(e="",t={})=>{let r;const i=b.isString(e);i&&(e=e.trim());const n=W(e);return i&&e.startsWith("-")?(r=g(e.substr(1),t),0-r):i&&e.startsWith("!")?(r=g(e.substr(1),t),!r):n?parseInt(e):e==="else"?!0:e==="false"?!1:e==="true"?!0:t[e]!==void 0?g(t[e],t):e},z=({termOne:e,termTwo:t,operator:r,props:i}={})=>{let n=g(e,i),s=g(t,i),o=0;switch(r){case"*":o=n*s;break;case"/":o=n/s;break;case"+":o=n+s;break;case"-":o=n-s;break;case"%":o=n%s;break;case"&&":o=n&&s;break;case"||":o=n||s;break;case"!=":case"!==":o=n!==s;break;case"==":case"===":o=n===s;break;case">":o=n>s;break;case"<":o=n<s;break;case">=":o=n>=s;break;case"<=":o=n<=s;break}return o},G=({logic:e,label:t,timeProps:r})=>l.jsx(l.Fragment,{children:t.map((i,n)=>{const s=e[n];let o=!1,a=!1;return i.map((u,c)=>{if(a=!1,!o){const f=s[c];a=L(f,r),a&&(o=!0)}return u.length?l.jsx("div",{className:a?y.wordHighlighted:y.word,children:u},`${n}-${c}`):null})})});var C=function(){if(typeof Map<"u")return Map;function e(t,r){var i=-1;return t.some(function(n,s){return n[0]===r?(i=s,!0):!1}),i}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var i=e(this.__entries__,r),n=this.__entries__[i];return n&&n[1]},t.prototype.set=function(r,i){var n=e(this.__entries__,r);~n?this.__entries__[n][1]=i:this.__entries__.push([r,i])},t.prototype.delete=function(r){var i=this.__entries__,n=e(i,r);~n&&i.splice(n,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,i){i===void 0&&(i=null);for(var n=0,s=this.__entries__;n<s.length;n++){var o=s[n];r.call(i,o[1],o[0])}},t}()}(),A=typeof window<"u"&&typeof document<"u"&&window.document===document,O=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),V=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(O):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Y=2;function Q(e,t){var r=!1,i=!1,n=0;function s(){r&&(r=!1,e()),i&&a()}function o(){V(s)}function a(){var u=Date.now();if(r){if(u-n<Y)return;i=!0}else r=!0,i=!1,setTimeout(o,t);n=u}return a}var U=20,J=["top","right","bottom","left","width","height","size","weight"],K=typeof MutationObserver<"u",X=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Q(this.refresh.bind(this),U)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,i=r.indexOf(t);~i&&r.splice(i,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!A||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),K?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!A||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,i=r===void 0?"":r,n=J.some(function(s){return!!~i.indexOf(s)});n&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),H=function(e,t){for(var r=0,i=Object.keys(t);r<i.length;r++){var n=i[r];Object.defineProperty(e,n,{value:t[n],enumerable:!1,writable:!1,configurable:!0})}return e},m=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||O},P=R(0,0,0,0);function E(e){return parseFloat(e)||0}function $(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(i,n){var s=e["border-"+n+"-width"];return i+E(s)},0)}function Z(e){for(var t=["top","right","bottom","left"],r={},i=0,n=t;i<n.length;i++){var s=n[i],o=e["padding-"+s];r[s]=E(o)}return r}function ee(e){var t=e.getBBox();return R(0,0,t.width,t.height)}function te(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return P;var i=m(e).getComputedStyle(e),n=Z(i),s=n.left+n.right,o=n.top+n.bottom,a=E(i.width),u=E(i.height);if(i.boxSizing==="border-box"&&(Math.round(a+s)!==t&&(a-=$(i,"left","right")+s),Math.round(u+o)!==r&&(u-=$(i,"top","bottom")+o)),!ne(e)){var c=Math.round(a+s)-t,f=Math.round(u+o)-r;Math.abs(c)!==1&&(a-=c),Math.abs(f)!==1&&(u-=f)}return R(n.left,n.top,a,u)}var re=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof m(e).SVGGraphicsElement}:function(e){return e instanceof m(e).SVGElement&&typeof e.getBBox=="function"}}();function ne(e){return e===m(e).document.documentElement}function ie(e){return A?re(e)?ee(e):te(e):P}function se(e){var t=e.x,r=e.y,i=e.width,n=e.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return H(o,{x:t,y:r,width:i,height:n,top:r,right:t+i,bottom:n+r,left:t}),o}function R(e,t,r,i){return{x:e,y:t,width:r,height:i}}var oe=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=R(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=ie(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),ce=function(){function e(t,r){var i=se(r);H(this,{target:t,contentRect:i})}return e}(),ae=function(){function e(t,r,i){if(this.activeObservations_=[],this.observations_=new C,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=i}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof m(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)||(r.set(t,new oe(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof m(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(i){return new ce(i.target,i.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),j=typeof WeakMap<"u"?new WeakMap:new C,D=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=X.getInstance(),i=new ae(t,r,this);j.set(this,i)}return e}();["observe","unobserve","disconnect"].forEach(function(e){D.prototype[e]=function(){var t;return(t=j.get(this))[e].apply(t,arguments)}});var ue=function(){return typeof O.ResizeObserver<"u"?O.ResizeObserver:D}();const fe=()=>{const e=p.useRef(null),t=p.useRef(null),[r,i]=p.useState({width:0,height:0}),n=p.useCallback(()=>{t.current&&(e.current&&t.current.unobserve(e.current),t.current.disconnect(),t.current=null)},[]),s=p.useCallback(()=>{t.current&&n(),e.current&&(t.current=new ue(a=>{const u=a.find(({target:c})=>c===e.current);if(u){const{width:c,height:f}=u.contentRect;i({width:c,height:f})}}),t.current.observe(e.current))},[n]);return{ref:p.useCallback(a=>{n(),e.current=a,s()},[s,n]),useRef:e,size:r}},le=1e-4,he=()=>{const{ref:e,size:t}=fe(),r=h.useRef(null),i=h.useCallback(()=>{if(!r.current||!t.height)return;let n=1,s=256,o=!1,a=-1,u=-1,c=!1,f=!1,_=!1,w;for(r.current.style.height="auto";!o&&Math.abs(n-s)>le;)n!==a&&(r.current.style.fontSize=`${n}px`,c=r.current.scrollHeight<t.height,a=n),s!==u&&(r.current.style.fontSize=`${s}px`,f=r.current.scrollHeight<t.height,u=s),c&&!f?(w=(n+s)*.5,r.current.style.fontSize=`${w}px`,_=r.current.scrollHeight<t.height,_?n=w:s=w):o=!0;r.current.style.fontSize=`${n}px`,r.current.style.removeProperty("height")},[t]);return h.useEffect(()=>{i()},[i,t]),{resizeRef:r,containerRef:e,resize:i}},de=({words:e})=>{const[t,r]=h.useState([]),[i,n]=h.useState([]),s=F(),{resizeRef:o,containerRef:a,resize:u}=he();return h.useEffect(()=>{if(!e)return;const c=N(e);r(c.logic),n(c.label)},[e]),h.useEffect(()=>{u()},[t,u]),l.jsx("div",{ref:a,className:y.container,children:l.jsx("div",{ref:o,className:y.words,children:l.jsx(G,{logic:t,label:i,timeProps:s})})})};d.WordClock=de,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
